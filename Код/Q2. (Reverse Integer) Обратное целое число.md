# Объяснение кода: Поиск опорного целого числа

```python
import math

class Solution:
    def pivotInteger(self, n: int) -> int:
        total_sum = n * (n + 1) // 2  # Формула суммы арифметической прогрессии
        x = int(math.sqrt(total_sum))  # Кандидат на опорное число
        
        # Проверка, является ли total_sum полным квадратом
        if x * x == total_sum:
            return x
        return -1
```

## Математическая основа
**Цель:** Найти число $x$, для которого выполняется равенство:  
$$\sum_{i=1}^x i = \sum_{i=x}^n i$$

### Вывод формулы
1. **Общая сумма** от 1 до $n$:  
   $$S = \frac{n(n+1)}{2}$$

2. **Сумма слева** от $x$ (включительно):  
   $$S_{\text{left}} = \frac{x(x+1)}{2}$$

3. **Сумма справа** от $x$ (включительно):  
   $$S_{\text{right}} = S - \frac{(x-1)x}{2}$$

4. **Условие равенства сумм:**  
   $$
   \frac{x(x+1)}{2} = \frac{n(n+1)}{2} - \frac{(x-1)x}{2}
   $$
   
   Упрощаем:
   $$
   x(x+1) + x(x-1) = n(n+1)  
   \Rightarrow 2x^2 = n(n+1)  
   \Rightarrow x = \sqrt{\frac{n(n+1)}{2}}
   $$

### Ключевое наблюдение
Опорное число $x$ существует **только если** $\frac{n(n+1)}{2}$ является **полным квадратом**.

## Пошаговое объяснение кода

### Шаг 1: Вычисление общей суммы
```python
total_sum = n * (n + 1) // 2
```
- Используем формулу суммы арифметической прогрессии $S = \frac{n(n+1)}{2}$
- **Примеры:**
  - $n = 8$: $S = \frac{8 \cdot 9}{2} = 36$
  - $n = 4$: $S = \frac{4 \cdot 5}{2} = 10$

### Шаг 2: Нахождение кандидата
```python
x = int(math.sqrt(total_sum))
```
- Извлекаем квадратный корень из общей суммы
- **Округление вниз** через `int()` дает потенциальное целое решение
- **Примеры:**
  - $S = 36$: $\sqrt{36} = 6.0 \rightarrow x = 6$
  - $S = 10$: $\sqrt{10} \approx 3.16 \rightarrow x = 3$

### Шаг 3: Проверка корректности
```python
if x * x == total_sum:
    return x
```
- **Почему именно так?**  
  Из-за потери точности при работе с числами с плавающей точкой, мы проверяем целочисленное равенство
- **Гарантия корректности:**  
  Если $x^2 = S$, то $x$ точно удовлетворяет исходному уравнению $2x^2 = n(n+1)$

## Примеры работы

### Пример 1: $n = 8$
```
1. total_sum = 8*9//2 = 36
2. x = int(sqrt(36)) = 6
3. Проверка: 6*6 = 36 == total_sum → возвращаем 6
```
**Визуализация:**  
$1 + 2 + 3 + 4 + 5 + 6 = 21$  
$6 + 7 + 8 = 21$  
$\Rightarrow$ Условие выполнено

### Пример 2: $n = 4$
```
1. total_sum = 4*5//2 = 10
2. x = int(sqrt(10)) = 3
3. Проверка: 3*3 = 9 ≠ 10 → возвращаем -1
```

### Пример 3: $n = 1$
```
1. total_sum = 1*2//2 = 1
2. x = int(sqrt(1)) = 1
3. Проверка: 1*1 = 1 == total_sum → возвращаем 1
```

## Краевые случаи

| Случай       | total_sum | x  | Результат | Пояснение                     |
|--------------|-----------|----|-----------|-------------------------------|
| $n = 1$     | 1         | 1  | 1         | $1 = 1$                      |
| $n = 49$    | 1225      | 35 | 35        | $35^2 = 1225$                |
| $n = 2$     | 3         | 1  | -1        | $1^2 = 1 ≠ 3$                |
| $n = 49$    | 1225      | 35 | 35        | $1+...+35 = 35+...+49 = 630$ |

## Сложность алгоритма

| Параметр   | Значение | Пояснение                                  |
|------------|----------|-------------------------------------------|
| **Время**  | $O(1)$   | Все операции выполняются за константное время |
| **Память** | $O(1)$   | Не используются дополнительные структуры данных |

## Почему это работает?
- **Математическая точность:** Формула $x = \sqrt{S}$ строго следует из условия задачи
- **Эффективность:** Избегаем перебора всех возможных $x$ от 1 до $n$
- **Надежность:** Проверка $x^2 == S$ гарантирует отсутствие ошибок округления

> **Важно:** Алгоритм работает **только** потому, что задача гарантирует наличие не более одного решения. Для других условий потребовался бы другой подход.
